app:
  description: ''
  icon: 🤖
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: RAG-Fully
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_api_compatible:0.0.19@219552f62b54919d6fd317c737956d3b2cc97719b85f0179bb995e5a512b7ebb
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 你好，我是一个知识库助手，请问我关于该知识库的任何问题，我将为您做专业的回答。
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - 选煤厂采取人工手选时候应符合哪些规定
    - 矿山机械磨损失效原因
    - DeepSeek-V3-0324模型性能如何
    - DeepSeek-R1-0528模型性能如何
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 1749779796939-source-1749779847714-target
      selected: false
      source: '1749779796939'
      sourceHandle: source
      target: '1749779847714'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: if-else
      id: 1749781548761-source-1749781561585-target
      selected: false
      source: '1749781548761'
      sourceHandle: source
      target: '1749781561585'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1749781561585-true-1749781564025-target
      selected: false
      source: '1749781561585'
      sourceHandle: 'true'
      target: '1749781564025'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1749781705977-source-1749781731563-target
      selected: false
      source: '1749781705977'
      sourceHandle: source
      target: '1749781731563'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1749781705977-fail-branch-1749781739390-target
      selected: false
      source: '1749781705977'
      sourceHandle: fail-branch
      target: '1749781739390'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: llm
      id: 1749779891164-source-1749781753094-target
      selected: false
      source: '1749779891164'
      sourceHandle: source
      target: '1749781753094'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1749781753094-source-1749781756177-target
      selected: false
      source: '1749781753094'
      sourceHandle: source
      target: '1749781756177'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1749781753094-fail-branch-1750149813759-target
      selected: false
      source: '1749781753094'
      sourceHandle: fail-branch
      target: '1750149813759'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1749779847714-source-1750152710933-target
      selected: false
      source: '1749779847714'
      sourceHandle: source
      target: '1750152710933'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1750152710933-source-1749779882182-target
      selected: false
      source: '1750152710933'
      sourceHandle: source
      target: '1749779882182'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1749779882182-false-1750763782978-target
      selected: false
      source: '1749779882182'
      sourceHandle: 'false'
      target: '1750763782978'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1749781561585-false-1749781699183-target
      source: '1749781561585'
      sourceHandle: 'false'
      target: '1749781699183'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 1749781699183-source-1749781705977-target
      source: '1749781699183'
      sourceHandle: source
      target: '1749781705977'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1749779660144-source-1751512178242-target
      source: '1749779660144'
      sourceHandle: source
      target: '1751512178242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1751512178242-source-1751512201471-target
      source: '1751512178242'
      sourceHandle: source
      target: '1751512201471'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1751512201471-true-1751512231379-target
      source: '1751512201471'
      sourceHandle: 'true'
      target: '1751512231379'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1749779882182-8acf8cd3-5a5b-4cf9-a39f-4c0eb091b20d-1749781548761-target
      source: '1749779882182'
      sourceHandle: 8acf8cd3-5a5b-4cf9-a39f-4c0eb091b20d
      target: '1749781548761'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1749779882182-cf520900-b832-42d6-aae9-1b75294a80ee-1752128519913-target
      source: '1749779882182'
      sourceHandle: cf520900-b832-42d6-aae9-1b75294a80ee
      target: '1752128519913'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: 1752128519913-source-1749779891164-target
      source: '1752128519913'
      sourceHandle: source
      target: '1749779891164'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1751512201471-false-1749779796939-target
      source: '1751512201471'
      sourceHandle: 'false'
      target: '1749779796939'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: 开始
        type: start
        variables: []
      height: 54
      id: '1749779660144'
      position:
        x: -500.68202774668083
        y: -93.03265436784538
      positionAbsolute:
        x: -500.68202774668083
        y: -93.03265436784538
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: query
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 851ea587-5006-490e-8996-bd7db670e406
          role: system
          text: "任务：\n你是一个专业的搜索优化助手。请根据用户输入的原始查询，生成5个语义相同但表达不同的改写版本。改写需满足以下要求：  \n\
            \n改写规则：\n1. 保留核心意图：确保改写后的查询与原始查询的搜索目标完全一致。  \n2. 多样化策略：  \n   - 若原始查询简短，尝试扩展为更自然的完整问句；\
            \  \n   - 若原始查询冗长，尝试精简关键词；  \n   - 可调整语序、同义词替换（需符合上下文）、切换主动/被动语态。  \n\
            3. 适配场景：改写后的查询应更符合搜索引擎或对话系统的理解习惯（例如：避免生硬的关键词堆砌）。  \n4. 禁止幻觉：不添加原查询未隐含的新信息。\
            \ \n5. 仅输出生成的问题，不要输出其他内容。 \n文本：{{#sys.query#}}./no_think"
        selected: false
        title: Query Rewriter
        type: llm
        variables: []
        vision:
          enabled: false
      height: 96
      id: '1749779796939'
      position:
        x: 917.8011858879374
        y: 108
      positionAbsolute:
        x: 917.8011858879374
        y: 108
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: query
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 0ceeb431-3720-45fb-adc2-74f4eb5bf0f1
          role: system
          text: "任务：\n你是一个智能路由助手。请分析用户输入的原始查询{{#1749779796939.text#}}，根据其意图将其分配到最匹配的服务类别，仅输出类别。具体要求如下：\
            \  \n\n路由规则  \n1. 意图识别：  \n   - 解析查询的核心目标（如咨询、操作指令、信息检索等）  \n   - 识别隐含需求（如用户说\"\
            太贵了\"可能需转接优惠咨询）  \n2. 分类逻辑：  \n   - 从候选类别列表中选择唯一最优类别：[模型精度或性能，煤矿知识]\n\
            \   - 若查询涉及多领域，选择最直接相关的类别  \n   - 若无法匹配任何类别，返回 \"Other\"\n\n文本：{{#1749779796939.text#}}"
        selected: false
        title: Query Routing
        type: llm
        variables: []
        vision:
          enabled: false
      height: 96
      id: '1749779847714'
      position:
        x: 1303.9354689360018
        y: 108
      positionAbsolute:
        x: 1303.9354689360018
        y: 108
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: cf520900-b832-42d6-aae9-1b75294a80ee
          conditions:
          - comparison_operator: contains
            id: cd5a8b71-f8c1-49ea-a458-f9b118a82251
            value: 模型精度或性能
            varType: string
            variable_selector:
            - '1750152710933'
            - result
          - comparison_operator: contains
            id: 6958661b-720c-4506-a54e-70550323056d
            value: model accuracy or performance
            varType: string
            variable_selector:
            - '1750152710933'
            - result
          id: cf520900-b832-42d6-aae9-1b75294a80ee
          logical_operator: or
        - case_id: 8acf8cd3-5a5b-4cf9-a39f-4c0eb091b20d
          conditions:
          - comparison_operator: contains
            id: 4767c028-c508-4759-a39f-1cb9e25744ad
            value: 煤矿知识
            varType: string
            variable_selector:
            - '1750152710933'
            - result
          - comparison_operator: contains
            id: 4a27d9e5-ac24-4b74-9305-6d6a0b649efc
            value: coal mine knowledge
            varType: string
            variable_selector:
            - '1750152710933'
            - result
          id: 8acf8cd3-5a5b-4cf9-a39f-4c0eb091b20d
          logical_operator: or
        desc: ''
        selected: false
        title: 条件分支
        type: if-else
      height: 226
      id: '1749779882182'
      position:
        x: 1937.424607184561
        y: 108
      positionAbsolute:
        x: 1937.424607184561
        y: 108
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The URL of the MCP Server with SSE endpoint.
            ja_JP: The URL of the MCP Server with SSE endpoint.
            pt_BR: The URL of the MCP Server with SSE endpoint.
            zh_Hans: MCP服务器的SSE端点URL。
          label:
            en_US: Server URL
            ja_JP: Server URL
            pt_BR: Server URL
            zh_Hans: 服务器地址
          llm_description: The URL of the MCP Server with SSE endpoint.
          max: null
          min: null
          name: server_url
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: HTTP headers in JSON format (e.g. {"Authorization":"Bearer token"}).
            ja_JP: HTTP headers in JSON format (e.g. {"Authorization":"Bearer token"}).
            pt_BR: HTTP headers in JSON format (e.g. {"Authorization":"Bearer token"}).
            zh_Hans: HTTP请求头，JSON格式（例如：{"Authorization":"Bearer token"}）。
          label:
            en_US: Headers
            ja_JP: Headers
            pt_BR: Headers
            zh_Hans: 请求头
          llm_description: HTTP headers in JSON format (e.g. {"Authorization":"Bearer
            token"}).
          max: null
          min: null
          name: headers
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: 60
          form: llm
          human_description:
            en_US: HTTP request timeout in seconds.
            ja_JP: HTTP request timeout in seconds.
            pt_BR: HTTP request timeout in seconds.
            zh_Hans: HTTP请求超时时间（秒）。
          label:
            en_US: Timeout
            ja_JP: Timeout
            pt_BR: Timeout
            zh_Hans: 超时时间
          llm_description: HTTP request timeout in seconds.
          max: null
          min: null
          name: timeout
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 300
          form: llm
          human_description:
            en_US: SSE read timeout in seconds (time to wait for SSE events).
            ja_JP: SSE read timeout in seconds (time to wait for SSE events).
            pt_BR: SSE read timeout in seconds (time to wait for SSE events).
            zh_Hans: SSE读取超时时间（秒）（等待SSE事件的时间）。
          label:
            en_US: SSE Read Timeout
            ja_JP: SSE Read Timeout
            pt_BR: SSE Read Timeout
            zh_Hans: SSE读取超时
          llm_description: SSE read timeout in seconds (time to wait for SSE events).
          max: null
          min: null
          name: sse_read_timeout
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Name of the tool to execute.
            ja_JP: Name of the tool to execute.
            pt_BR: Name of the tool to execute.
            zh_Hans: 要执行的工具的名称。
          label:
            en_US: Tool Name
            ja_JP: Tool Name
            pt_BR: Tool Name
            zh_Hans: 工具名称
          llm_description: Name of the tool to execute.
          max: null
          min: null
          name: tool_name
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Tool arguments (JSON string in the python dict[str, Any] format).
            ja_JP: Tool arguments (JSON string in the python dict[str, Any] format).
            pt_BR: Tool arguments (JSON string in the python dict[str, Any] format).
            zh_Hans: 工具的参数，JSON格式的字符串（Python dict[str, Any]格式）。
          label:
            en_US: Arguments
            ja_JP: Arguments
            pt_BR: Arguments
            zh_Hans: 参数
          llm_description: Tool arguments (JSON string in the python dict[str, Any]
            format).
          max: null
          min: null
          name: arguments
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          arguments: ''
          headers: ''
          server_url: ''
          sse_read_timeout: ''
          timeout: ''
          tool_name: ''
        provider_id: arrenxxxxx/mcp_config_during_use/mcp_config
        provider_name: arrenxxxxx/mcp_config_during_use/mcp_config
        provider_type: builtin
        selected: true
        title: Mysql MCP Server
        tool_configurations: {}
        tool_label: 调用MCP工具
        tool_name: mcp_call_tool
        tool_parameters:
          arguments:
            type: mixed
            value: '{"query": "{{#1752128519913.text#}}"}'
          server_url:
            type: mixed
            value: http://192.168.30.127:9128/sse
          tool_name:
            type: mixed
            value: execute_sql
        type: tool
      height: 54
      id: '1749779891164'
      position:
        x: 2683.8889154228295
        y: -162.69924940804776
      positionAbsolute:
        x: 2683.8889154228295
        y: -162.69924940804776
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - e45b99df-57d7-49a4-82f9-e235c29dbfe3
        - e7b7cb7d-893e-4f21-9ba9-5c2a104cccff
        - d587081d-2224-4822-84be-32646ca31bdb
        - 1179b75c-e3ca-40fe-b3dc-5b862655087f
        desc: ''
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          reranking_model:
            model: qwen3-reranker
            provider: langgenius/openai_api_compatible/openai_api_compatible
          score_threshold: 0.5
          top_k: 5
        query_variable_selector:
        - '1749779796939'
        - text
        retrieval_mode: multiple
        selected: false
        title: 知识检索
        type: knowledge-retrieval
      height: 54
      id: '1749781548761'
      position:
        x: 2301.3876547665154
        y: 311.55786843598605
      positionAbsolute:
        x: 2301.3876547665154
        y: 311.55786843598605
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 180b11b3-9155-4f57-88be-ec36a97d7f30
            value: ''
            varType: array[object]
            variable_selector:
            - '1749781548761'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 条件分支
        type: if-else
      height: 126
      id: '1749781561585'
      position:
        x: 2613.153205534946
        y: 311.55786843598605
      positionAbsolute:
        x: 2613.153205534946
        y: 311.55786843598605
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 非常抱歉，查询的关于“{{#sys.query#}}” 这个问题，在我们的知识库里面没有找到，您可以问我知识库想要了解的问题，我会尽量为您做出详尽解答。
        desc: ''
        selected: false
        title: 直接回复 2
        type: answer
        variables: []
      height: 169
      id: '1749781564025'
      position:
        x: 2942.866101505163
        y: 154.81291878127524
      positionAbsolute:
        x: 2942.866101505163
        y: 154.81291878127524
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1749781548761'
          - result
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: query
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 107130ab-da85-488b-98a1-e5f3dafdb1c1
          role: system
          text: "任务：\n你是一个提示词优化专家。请对用户输入的提示词进行无损压缩，要求：  \n1. 核心指令保留：确保压缩后提示能触发模型完成相同任务\
            \  \n2. 压缩策略：  \n   - 删除冗余修饰词（如\"请仔细思考\"→\"思考\"）  \n   - 合并同义表达（如\"步骤1,步骤2\"\
            →\"步骤1/2\"）  \n   - 用符号替代低频关键词（如\"JSON格式\"→\"[JSON]\"）  \n   - 保留所有约束条件（如输出格式、禁止行为等）\
            \  \n3. 压缩目标：  \n   - 长度减少至原始提示的50%  \n   - 字符数控制在16384以内  \n4. 可逆性：压缩结果应能被专业用户理解并复原\n\
            5. 仅输出压缩后的结果，不要输出其他内容\n\n文本：{{#context#}}./no_think"
        selected: false
        title: Prompt Compression
        type: llm
        variables: []
        vision:
          enabled: false
      height: 96
      id: '1749781699183'
      position:
        x: 2948.459896858501
        y: 510
      positionAbsolute:
        x: 2948.459896858501
        y: 510
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1749781699183'
          - text
        desc: ''
        error_strategy: fail-branch
        model:
          completion_params: {}
          mode: chat
          name: Qwen3-30B-A3B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: e9862634-24ad-48ba-a57a-fa165d7d665d
          role: system
          text: 你是一个乐于助人的助手，专注于知识库相关问题的解答与支持。面对用户咨询时，对用户问题结合知识库的上下文：{{#context#}},
            来生成逻辑清晰、内容详实、专业准确的回答，不要进行额外推测或联想。
        - id: f7c2d1b2-fa45-486c-a8fb-4cebfac9e332
          role: user
          text: '{{#sys.query#}}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 152
      id: '1749781705977'
      position:
        x: 3298.7672097246486
        y: 510
      positionAbsolute:
        x: 3298.7672097246486
        y: 510
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1749781705977.text#}}'
        desc: ''
        selected: false
        title: 直接回复 3
        type: answer
        variables: []
      height: 105
      id: '1749781731563'
      position:
        x: 3797.086287231571
        y: 270.1558349723
      positionAbsolute:
        x: 3797.086287231571
        y: 270.1558349723
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 大模型服务异常，请查看日志！
        desc: ''
        selected: false
        title: 直接回复 4
        type: answer
        variables: []
      height: 102
      id: '1749781739390'
      position:
        x: 3797.086287231571
        y: 792.7433816020463
      positionAbsolute:
        x: 3797.086287231571
        y: 792.7433816020463
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        model:
          completion_params: {}
          mode: chat
          name: Qwen3-30B-A3B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: ca5cbc7e-1ec4-4612-a0b9-bde1680d9820
          role: system
          text: 你是一个乐于助人的助手，专注于知识库相关问题的解答与支持。面对用户咨询时，对用户问题根据查询到的信息{{#1749779891164.text#}}来生成逻辑清晰、内容详实、专业准确的回答，不要进行额外推测或联想。
        - id: b9764b29-ad83-4eed-9ce9-2d7e505acc90
          role: user
          text: '{{#sys.query#}}'
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 126
      id: '1749781753094'
      position:
        x: 3132.5108687892566
        y: -175.62955977904863
      positionAbsolute:
        x: 3132.5108687892566
        y: -175.62955977904863
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1749781753094.text#}}'
        desc: ''
        selected: false
        title: 直接回复 5
        type: answer
        variables: []
      height: 105
      id: '1749781756177'
      position:
        x: 3568.1677543833807
        y: -341.20591683113264
      positionAbsolute:
        x: 3568.1677543833807
        y: -341.20591683113264
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 大模型服务异常，请查看日志！
        desc: ''
        selected: false
        title: 直接回复 7
        type: answer
        variables: []
      height: 102
      id: '1750149813759'
      position:
        x: 3328.0897981890007
        y: 26.73651073335118
      positionAbsolute:
        x: 3328.0897981890007
        y: 26.73651073335118
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(arg1: str) -> dict:\n    return {\n        \"result\": arg1.split(\"\
          </think>\\n\\n\")[-1],\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: 代码执行
        type: code
        variables:
        - value_selector:
          - '1749779847714'
          - text
          variable: arg1
      height: 54
      id: '1750152710933'
      position:
        x: 1636.0710669287596
        y: 108
      positionAbsolute:
        x: 1636.0710669287596
        y: 108
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 非常抱歉，您查询的相关内容在服务中不存在！
        desc: ''
        selected: false
        title: 直接回复 7
        type: answer
        variables: []
      height: 118
      id: '1750763782978'
      position:
        x: 2301.3876547665154
        y: 599.2594345895792
      positionAbsolute:
        x: 2301.3876547665154
        y: 599.2594345895792
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import re \n\ndef main(arg1: str) -> dict:\n    if re.match(\"你好\"\
          , arg1) or re.match(\"你是谁\", arg1) or re.match(\"how are you\", arg1) or\
          \ arg1 == \"你\":\n        return {\n            \"result\": \"True\",\n\
          \        }\n    else:\n        return {\n            \"result\": \"False\"\
          ,\n        }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: 问候语判断
        type: code
        variables:
        - value_selector:
          - sys
          - query
          variable: arg1
      height: 54
      id: '1751512178242'
      position:
        x: -33.05445605494231
        y: -86.247677464999
      positionAbsolute:
        x: -33.05445605494231
        y: -86.247677464999
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 26e117d9-e132-4101-9ad7-ee889e53448d
            value: 'True'
            varType: string
            variable_selector:
            - '1751512178242'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 条件分支 5
        type: if-else
      height: 126
      id: '1751512201471'
      position:
        x: 483.6188393845085
        y: -86.247677464999
      positionAbsolute:
        x: 483.6188393845085
        y: -86.247677464999
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 你好，我是AI小助手，您可以问我煤矿相关问题，我会尽量为您做出详尽解答。
        desc: ''
        selected: false
        title: 直接回复
        type: answer
        variables: []
      height: 134
      id: '1751512231379'
      position:
        x: 1006.5279258939431
        y: -313.2545389972768
      positionAbsolute:
        x: 1006.5279258939431
        y: -313.2545389972768
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: nl2sql
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 3a45b789-de74-47ac-a81c-79207a84e09c
          role: system
          text: "你是一名mysql专家，现在需要阅读并理解下面的【数据库schema】描述，以及可能用到的【参考信息】，并运用mysql知识生成sql语句回答【用户问题】。\n\
            \    【用户问题】\n    {{#1749779796939.text#}}\n\n    【数据库schema】\n    【DB_ID】\
            \ rag\n【Schema】\n# Table: rag.benchmark_results\n[\n(id:INTEGER, Primary\
            \ Key, Examples: [1, 2, 3]),\n(max_concurrency:INTEGER, Examples: [4,\
            \ 2, 1]),\n(duration_seconds:DECIMAL, Examples: [191.02, 194.2, 200.01]),\n\
            (successful_requests:INTEGER, Examples: [20, 10, 5]),\n(input_tokens:INTEGER,\
            \ Examples: [128, 256, 512]),\n(generated_tokens:INTEGER, Examples: [1024,\
            \ 8192]),\n(req_throughput:DECIMAL, Examples: [0.03, 0.02, 0.01]),\n(output_token_throughput:DECIMAL,\
            \ Examples: [26.8, 26.37, 25.6]),\n(total_token_throughput:DECIMAL, Examples:\
            \ [30.15, 32.96, 38.4]),\n(mean_ttft_ms:DECIMAL, Examples: [1902.9, 2701.4,\
            \ 3948.0]),\n(mean_tpot_ms:DECIMAL, Examples: [99.8, 101.2, 103.4]),\n\
            (decoding_token_throughput:DECIMAL, Examples: [10.02, 9.88, 9.67]),\n\
            (per_req_decoding_throughput:DECIMAL, Examples: [10.02, 9.88, 9.67]),\n\
            (model_name:VARCHAR, Examples: [DeepSeek-V3-0324, DeepSeek-R1-0528]),\n\
            (cpu_info:VARCHAR, Examples: [Intel(R) Xeon(R) Platinum 8358 CPU @ 2.60GHz]),\n\
            (ai_info:VARCHAR, Examples: [AI2.8.0]),\n(test_date:VARCHAR, Examples:\
            \ [20250605_034410, 20250605_034724, 20250605_035041])\n]\n\n    【参考信息】\n\
            \    \n\n    【用户问题】\n    {{#1749779796939.text#}}\n\n    ```sql"
        selected: false
        title: NL2SQL
        type: llm
        variables: []
        vision:
          enabled: false
      height: 96
      id: '1752128519913'
      position:
        x: 2266.9267041166045
        y: -162.69924940804776
      positionAbsolute:
        x: 2266.9267041166045
        y: -162.69924940804776
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -440.7627749555659
      y: 578.6117811140823
      zoom: 0.8705505632961257
